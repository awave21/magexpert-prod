# Шаблон письма о регистрации на мероприятие

Этот документ описывает переменные, которые доступны в шаблоне письма о регистрации на мероприятие в Sendsay.

**⚠️ Важно:** В шаблон передаются только заполненные поля. Если поле пустое или null, оно не будет передано в шаблон. Всегда используйте проверки `{% if field_name %}` перед выводом данных.

## Переменные в шаблоне (variables)

### Информация о пользователе
- `user_name` - Полное имя пользователя (Имя + Фамилия)
- `user_email` - Email пользователя
- `is_new_user` - Булево значение, новый ли это пользователь (true/false)
- `password` - Пароль пользователя (только для новых пользователей)

### Информация о мероприятии
- `event_title` - Название мероприятия (всегда присутствует)
- `event_type` - Тип мероприятия (только если заполнен)
- `event_format` - Формат проведения (online, offline, hybrid) (только если заполнен)
- `event_location` - Место проведения (только если указано)
- `is_paid` - Является ли мероприятие платным (true/false) (всегда присутствует)
- `price` - Отформатированная цена (например, "5 000 ₽") (только если есть цена для показа)

### Даты и время (только для неархивных мероприятий и только если заполнены)
- `start_date` - Дата начала в формате ДД.ММ.ГГГГ
- `start_time` - Время начала
- `end_date` - Дата окончания в формате ДД.ММ.ГГГГ  
- `end_time` - Время окончания

## Дополнительные данные (extraData)

### Информация о спикерах
- `speakers` - Массив объектов (только если есть спикеры) со следующими полями:
  - `name` - Полное имя спикера (всегда присутствует)
  - `position` - Должность спикера (только если заполнена)
  - `company` - Компания спикера (только если заполнена)
  - `regalia` - Регалии и достижения спикера (только если заполнены)
  - `role` - Роль спикера на мероприятии (только если заполнена)
  - `topic` - Тема выступления спикера (только если заполнена)

### Техническая информация
- `event_slug` - URL-slug мероприятия для создания ссылок

## Примеры использования в шаблоне

### Приветствие пользователя
```
Здравствуйте, {{ user_name }}!
```

### Условное отображение пароля для новых пользователей
```
{% if is_new_user and password %}
Ваш пароль для входа: {{ password }}
{% endif %}
```

### Информация о мероприятии
```
Вы успешно зарегистрированы на мероприятие "{{ event_title }}"

{% if event_type %}
Тип мероприятия: {{ event_type }}
{% endif %}

{% if event_format %}
Формат: {{ event_format }}
{% endif %}

{% if start_date %}
Дата проведения: {{ start_date }}
{% if start_time %}в {{ start_time }}{% endif %}
{% endif %}

{% if event_location %}
Место проведения: {{ event_location }}
{% endif %}

{% if is_paid and price %}
Стоимость участия: {{ price }}
{% endif %}
```

### Список спикеров
```
{% if speakers %}
Спикеры мероприятия:
{% for speaker in speakers %}
• {{ speaker.name }}
  {% if speaker.position and speaker.company %}
  {{ speaker.position }}, {{ speaker.company }}
  {% elif speaker.position %}
  {{ speaker.position }}
  {% elif speaker.company %}
  {{ speaker.company }}
  {% endif %}
  {% if speaker.role %}
  Роль: {{ speaker.role }}
  {% endif %}
  {% if speaker.topic %}
  Тема: {{ speaker.topic }}
  {% endif %}
  {% if speaker.regalia %}
  {{ speaker.regalia }}
  {% endif %}
{% endfor %}
{% endif %}
```

## Настройка в конфигурации

Добавьте в файл `.env`:
```
SENDSAY_DRAFT_EVENT_REGISTRATION=YOUR_DRAFT_ID
```

где `YOUR_DRAFT_ID` - это ID черновика письма в Sendsay.